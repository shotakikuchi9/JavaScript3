<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>JavaScript3</title>
  </head>
  <body>
    <h1>ToDoリスト</h1>
    <div>
      <label><input type="radio" checked name="type"> 全て</label>
      <label><input type="radio" name="type"> 作業中</label>
      <label><input type="radio" name="type"> 完了</label>
    </div>

    <div>
      <table id="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>コメント</th>
            <th>状態</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
        
        </tbody>
      </table>
    </div>

    <h2>新規タスクの追加</h2>
    <div>
      <input type="text" name="task" id="inputTask">
      <button id="add">追加</button>
    </div>
  <script>
    'use strict'
    let tasks = [];

      document.getElementById('add').addEventListener ('click', () => {
        const addedTask = {
          content: document.getElementById('inputTask').value,
          state: '作業中'
        }
        tasks.push(addedTask);
        show();
        document.getElementById('inputTask').value = '';
        document.getElementById('inputTask').focus();
      });
        
      const show = () => {
        const tbody = document.querySelector('tbody');
        while (tbody.firstChild) {
              tbody.removeChild(tbody.firstChild);
            }

        tasks.forEach((task,index) => {
          const row = document.createElement('tr');
          tbody.appendChild(row);

          const firstCell = document.createElement('td');
          firstCell.textContent = index;
          row.appendChild(firstCell);

          const secondCell = document.createElement('td');
          secondCell.textContent = task.content;
          row.appendChild(secondCell);
       

          const thirdCell = document.createElement('td');
          const statusButton = document.createElement('button');
          statusButton.textContent = '作業中';
          thirdCell.appendChild(statusButton);
          row.appendChild(thirdCell);
        

          const fourthCell = document.createElement('td');
          const deleteButton = document.createElement('button');
          deleteButton.textContent = '削除';
          fourthCell.appendChild(deleteButton);
          row.appendChild(fourthCell);
          
          // 削除機能
          deleteButton.addEventListener('click', () => {
            while (tbody.firstChild) {
              tbody.removeChild(tbody.firstChild);
            }
            const index = row.rowIndex-1;
            tasks.splice(index,1);
            show();
          })
        })
      }
    
  </script>

  </body>

</html>